from src.models.validation.validation import Validation
from src.models.validation.mock_response import MockResponseList, MockResponse
from src.models.validation.wanted_result import WantedResultList, WantedResult
import src.data.fixtures_scenarios as scenarios

NGINX_WRONG_IMAGE = Validation(
    scenario=scenarios.NGINX_IMAGE_TYPO,
    mock_responses=MockResponseList(
        items=[
            MockResponse(
                mock_response_id="simple-no-yaml",
                mock_response_content="The image you try to use does not exist. You might have misspelled the image name. The correct image name would 'nginx'. ",
                wanted_results=WantedResultList(
                    items=[
                        WantedResult(
                            expectation_id="image-does-not-exist",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="image-typo",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="propose-nginx",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="basic-yaml",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml-nginx",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml",
                            wanted_result=False,
                            actual_result=None,
                        ),
                    ]
                ),
            ),
            MockResponse(
                mock_response_id="wrong-negative",
                mock_response_content="Everything looks good. There is no problem.",
                wanted_results=WantedResultList(
                    items=[
                        WantedResult(
                            expectation_id="image-does-not-exist",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="image-typo",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="propose-nginx",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="basic-yaml",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml-nginx",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml",
                            wanted_result=False,
                            actual_result=None,
                        ),
                    ]
                ),
            ),
            MockResponse(
                mock_response_id="simple-yaml",
                mock_response_content="""
                Your pod definition is almost correct. You just need to change the image name to 'nginx'; the image 'ngix' does not exist.
                ```yaml
                apiVersion: v1\nkind: Pod\nmetadata:\n  name: mypod\n  namespace: myns\nspec:\n  containers:\n  - name: mycontainer\n    image: nginx\n",
                ```
                """,
                wanted_results=WantedResultList(
                    items=[
                        WantedResult(
                            expectation_id="image-does-not-exist",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="image-typo",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="propose-nginx",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="basic-yaml",
                            wanted_result=True,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml-nginx",
                            wanted_result=False,
                            actual_result=None,
                        ),
                        WantedResult(
                            expectation_id="complete-yaml",
                            wanted_result=False,
                            actual_result=None,
                        ),
                    ]
                ),
            ),
        ]
    ),
)

ALL_CALIBRATIONS = [NGINX_WRONG_IMAGE]
